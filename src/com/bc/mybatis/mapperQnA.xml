<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="qbookstore">
	<select id="selectall" parameterType="Map" resultType="com.bc.model.vo.QnAVO">
		SELECT *
		FROM (SELECT ROWNUM R_NUM, Q.*
		        FROM (SELECT *
		              FROM QNA
		              ORDER BY Q_NUM
		             ) Q
		     )    
		WHERE R_NUM BETWEEN #{begin} AND #{end}
	</select>	
	
	<select id="selectone" parameterType="int" resultType="com.bc.model.vo.QnAVO">
		SELECT * FROM QNA 
		 WHERE Q_NUM = #{qNum}
	</select>
	
	<select id="total" resultType="int">
		SELECT COUNT(*) FROM QNA
	</select>
	
	<insert id="insert" parameterType="Map">
		INSERT INTO QNA VALUES(11 ,#{memberId}, 
                    (SELECT USERNAME FROM MEMBER WHERE MEMBER_ID = #{memberId}), 
                    (SELECT PASSWORD FROM MEMBER WHERE MEMBER_ID = #{memberId}),
                    #{subject}, #{category}, #{rContent}, #{upload}, 
                    (SELECT B_CODE FROM BOOK WHERE B_NAME = #{bName}),
                    (SELECT B_TYPE FROM BOOK WHERE B_NAME = #{bName}), 
                    SYSDATE) 
	</insert>
	
	<delete id="delete" parameterType="int">
		DELETE FROM QNA
		 WHERE Q_NUM = #{qNum}
	</delete>
</mapper>

