<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Nbookstore">
	<select id="Nselectall" resultType="com.bc.model.vo.GuestBookVO" parameterType="map">
		SELECT *
		FROM (SELECT ROWNUM R_NUM, NOTICE.*
		        FROM (SELECT *
		              FROM NOTICE
		              ORDER BY N_NUM DESC
		             ) NOTICE
		     )    
		WHERE R_NUM BETWEEN #{begin} AND #{end}
	</select>
	<insert id="Ninsert" parameterType="map">
		INSERT INTO NOTICE VALUES(SEQNOTICE.nextval,#{subject},#{content},SYSDATE)
	</insert>
	<select id="Nselectone" resultType="com.bc.model.vo.GuestBookVO" parameterType="int">
		SELECT * FROM NOTICE
		WHERE N_NUM = #{nNum}
	</select>
	
	<select id="totalCount" resultType="int">
		SELECT COUNT(*) FROM NOTICE
	</select>
	<select id="Nall" resultType="com.bc.model.vo.BookVO" parameterType="string">
		SELECT B_NAME, B_IMAGE, WRITER_NAME FROM BOOK
		WHERE L_CODE = #{lcode}
	</select>
	
	<select id="searchList" resultType="com.bc.model.vo.BookVO" parameterType="map">
		SELECT * FROM BOOK
			WHERE B_NAME LIKE '%'||#{search}||'%'
			OR B_COMPANY LIKE '%'||#{search}||'%'
			OR WRITER_NAME LIKE '%'||#{search}||'%'
			AND B_TYPE = 1
	</select>
	<update id="Nupdate" parameterType="map">
		UPDATE NOTICE 
		SET SUBJECT = #{subject},
			CONTENT = #{content}
		WHERE N_NUM = #{nNum}
	</update>
	
	<select id="1list" resultType="com.bc.model.vo.BookVO" parameterType="map">
		<![CDATA[
			SELECT * FROM BOOK
				WHERE H_CODE = #{hCode}
				AND L_CODE = #{hCode} || '1'
				AND ROWNUM <= 4
		]]>
	</select>
	<select id="2list" resultType="com.bc.model.vo.BookVO" parameterType="map">
		<![CDATA[
			SELECT * FROM BOOK
				WHERE H_CODE = #{hCode}
				AND L_CODE = #{hCode} || '2'
				AND ROWNUM <= 4
		]]>
	</select>
	<select id="3list" resultType="com.bc.model.vo.BookVO" parameterType="map">
		<![CDATA[
			SELECT * FROM BOOK
				WHERE H_CODE = #{hCode}
				AND L_CODE = #{hCode} || '3'
				AND ROWNUM <= 4
		]]>
	</select>
	<select id="4list" resultType="com.bc.model.vo.BookVO" parameterType="map">
		<![CDATA[
			SELECT * FROM BOOK
				WHERE H_CODE = #{hCode}
				AND L_CODE = #{hCode} || '4'
				AND ROWNUM <= 4
		]]>
	</select>
	<select id="5list" resultType="com.bc.model.vo.BookVO" parameterType="map">
		<![CDATA[
			SELECT * FROM BOOK
				WHERE H_CODE = #{hCode}
				AND L_CODE = #{hCode} || '5'
				AND ROWNUM <= 4
		]]>
	</select>
	<select id="mlist1" resultType="com.bc.model.vo.BookVO" parameterType="map">
		<![CDATA[
			SELECT B.*, L.L_NAME L_NAME FROM BOOK B, LOW_CATEGORY L
		    WHERE L.L_CODE = B.L_CODE
		    AND B.B_CODE >= 5
		    AND B.H_CODE = #{hCode}
		    AND B.L_CODE = #{hCode} || '1'
		]]>
	</select>
	<select id="mlist2" resultType="com.bc.model.vo.BookVO" parameterType="map">
		<![CDATA[
			SELECT B.*, L.L_NAME L_NAME FROM BOOK B, LOW_CATEGORY L
		    WHERE L.L_CODE = B.L_CODE
		    AND B.B_CODE >= 10
		    AND B.H_CODE = #{hCode}
		    AND B.L_CODE = #{hCode} || '2'
		]]>
	</select>
	<select id="mlist3" resultType="com.bc.model.vo.BookVO" parameterType="map">
		<![CDATA[
			SELECT B.*, L.L_NAME L_NAME FROM BOOK B, LOW_CATEGORY L
		    WHERE L.L_CODE = B.L_CODE
		    AND B.B_CODE >= 15
		    AND B.H_CODE = #{hCode}
		    AND B.L_CODE = #{hCode} || '3'
		]]>
	</select>
	<select id="mlist4" resultType="com.bc.model.vo.BookVO" parameterType="map">
		<![CDATA[
			SELECT B.*, L.L_NAME L_NAME FROM BOOK B, LOW_CATEGORY L
		    WHERE L.L_CODE = B.L_CODE
		    AND B.B_CODE >= 20
		    AND B.H_CODE = #{hCode}
		    AND B.L_CODE = #{hCode} || '4'
		]]>
	</select>
	<select id="mlist5" resultType="com.bc.model.vo.BookVO" parameterType="map">
		<![CDATA[
			SELECT B.*, L.L_NAME L_NAME FROM BOOK B, LOW_CATEGORY L
		    WHERE L.L_CODE = B.L_CODE
		    AND B.B_CODE >= 25
		    AND B.H_CODE = #{hCode}
		    AND B.L_CODE = #{hCode} || '5'
		]]>
	</select>
	
	
</mapper>