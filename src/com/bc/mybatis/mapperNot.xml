<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Nbookstore">
	<select id="Nselectall" resultType="com.bc.model.vo.GuestBookVO" parameterType="map">
		SELECT *
		FROM (SELECT ROWNUM R_NUM, NOTICE.*
		        FROM (SELECT *
		              FROM NOTICE
		              ORDER BY N_NUM DESC
		             ) NOTICE
		     )    
		WHERE R_NUM BETWEEN #{begin} AND #{end}
	</select>
	<insert id="Ninsert" parameterType="map">
		INSERT INTO NOTICE VALUES(SEQNOTICE.nextval,#{subject},#{content},SYSDATE)
	</insert>
	<select id="Nselectone" resultType="com.bc.model.vo.GuestBookVO" parameterType="int">
		SELECT * FROM NOTICE
		WHERE N_NUM = #{nNum}
	</select>
	
	<select id="totalCount" resultType="int">
		SELECT COUNT(*) FROM NOTICE
	</select>
	<select id="Nall" resultType="com.bc.model.vo.BookVO" parameterType="string">
		SELECT B_NAME, B_IMAGE, WRITER_NAME FROM BOOK
		WHERE L_CODE = #{lcode}
	</select>
	
	<select id="searchList" resultType="com.bc.model.vo.BookVO" parameterType="map">
		SELECT * FROM BOOK
			WHERE B_NAME LIKE '%'||#{search}||'%'
			OR B_COMPANY LIKE '%'||#{search}||'%'
			OR WRITER_NAME LIKE '%'||#{search}||'%'
			AND B_TYPE = 1
	</select>
	<update id="Nupdate" parameterType="map">
		UPDATE NOTICE 
		SET SUBJECT = #{subject},
			CONTENT = #{content}
		WHERE N_NUM = #{nNum}
	</update>
	
</mapper>